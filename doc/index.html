<!DOCTYPE html>
<html class="wd">

	<head>
		<title>Bibliotecas Web WD: Manual do Arquivo JavaScript</title>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<meta name="keywords" content="wd, stylesheet, attributes, tools, HTML, CSS, javaScript, library, queryselector, handbook, github, donadelli, wdonadelli" />
		<meta name="author" content="Willian Donadelli"/>
		<meta name="description" content="WD Web Libraries: JS File Guide" />
		<meta name="rating" content="general" />
		<meta name="revisit-after" content="2 days" />
		<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
		<link  href="../wd5.css" rel="stylesheet" />
		<script src="../wd5.js"></script>
		<script>
const JS  = "../wd5.js";
const CSS = "../wd5.css";
const tag = [ /* ordem: do mais para o menos espec√≠fico */
	{re: /^([^#`<-].+)$/,           rp: "<p>$1</p>"},
	{re: /^\#\#\#\#\#\#([^#].+)$/, rp: "<h6>$1</h6>"},
	{re: /^\#\#\#\#\#([^#].+)$/,   rp: "<h5>$1</h5>"},
	{re: /^\#\#\#\#([^#].+)$/,     rp: "<h4>$1</h4>"},
	{re: /^\#\#\#([^#].+)$/,       rp: "<h3>$1</h3>"},
	{re: /^\#\#([^#].+)$/,         rp: "<h2>$1</h2>"},
	{re: /^\#([^#].+)$/,           rp: "<h1>$1</h1>"},
	{re: /^\`([^`]+)\`$/,          rp: "<pre class=\"wd-code\">$1</pre>"},
	{re: /^\-\ ([^:]+)\:\ (.+)/,   rp: "<dl><dt>$1</dt><dd>$2</dd></dl>"},
	{re: /^\-\ (.+)/,              rp: "<dl><dd>$1</dd></dl>"},
	{re: /\`([^`]+)\`/g,           rp: "<code>$1</code>"},
	//{re: /\"([^"]+)\"/g,           rp: "<q>$1</q>"},
	//{re: /\_\_([^_]+)\_\_/g,       rp: "<b>$1</b>"},
	//{re: /\_([^_]+)\_/g,           rp: "<i>$1</i>"},
	{re: /\[\]\(([^()]+)\)/g,      rp: "<a href=\"$1\" target=\"_blank\">$1</a>"},
];

function trocas(x) {
	x = x.replace(/\ +/g, " ");
	let i = -1;
	while (++i < tag.length)
		while (tag[i].re.test(x))
			x = x.replace(tag[i].re, tag[i].rp);
	return x;
}

function manual(x) {
	if (x === null || x === undefined) throw new Error("Leitura do arquivo.");
	let html   = [];
	let linhas = x.split("\n");
	let aberto = false;
	linhas.forEach(function(v,i,a) {
		if (v.trim() === "/**") {
			aberto = true;
			a[i] = "";
		} else if (v.trim() === "**/") {
			aberto = false;
			a[i] = "";
		} else if (!aberto) {
			a[i] = "";
		} else {
			a[i] = trocas(v.trim());
		}
	});

	document.querySelector("main").innerHTML = linhas.join("")
}

function lerJS() {
	wd().send(JS, function (x) {
		if (x.closed)
			manual(x.text);
		return;
	});
}

wd(window).addHandler({
	load: function() {
		lerJS();



	}
});
		</script>
	</head>

	<body class="wd-padd">

		<main class="wd-read"></main>

	</body>

</html>
