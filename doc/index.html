<!DOCTYPE html>
<html class="wd">

	<head>
		<title>Bibliotecas Web WD: Manual do Arquivo JavaScript</title>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<meta name="keywords" content="wd, stylesheet, attributes, tools, HTML, CSS, javaScript, library, queryselector, handbook, github, donadelli, wdonadelli" />
		<meta name="author" content="Willian Donadelli"/>
		<meta name="description" content="WD Web Libraries: JS File Guide" />
		<meta name="rating" content="general" />
		<meta name="revisit-after" content="2 days" />
		<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
		<link  href="../wd5.css" rel="stylesheet" />
		<script src="../wd5.js"></script>
		<style>
			main > * {
				margin: 0.8em auto;
			}
			main > article {
				padding-left: 1em;
			}
			main > section {
				font-family: "Courier New";
			}
			main > section.nivel0 {
				font-family: monospace;
				color: teal;
				border-top: thin solid;
				padding-top: 0.4em;
			}
			main > section.nivel0 {padding-left :  0em;}
			main > article.nivel0 {padding-left :  1em;}
			main > section.nivel1 {padding-left :  3em;}
			main > article.nivel1 {padding-left :  4em;}
			main > section.nivel2 {padding-left :  5em;}
			main > article.nivel2 {padding-left :  6em;}
			main > section.nivel3 {padding-left :  7em;}
			main > article.nivel3 {padding-left :  8em;}
			main > section.nivel4 {padding-left :  9em;}
			main > article.nivel4 {padding-left : 10em;}
			main > section > b    {color: royalblue;}
		</style>

		<script>
			const JS  = "../wd5.js";
			const CSS = "../wd5.css";

			function manual(x) {
				if (x === null || x === undefined)
					return alert("Erro ao ler o arquivo!");
				/* Legenda: |^t título|^c capítulo|^0-9 nome|^0-9: descrição|\b negrito|\i itálico|\u sublinhado|\c code*/
				let busca = /\/\*[0-9tc]\:?\ .+?\*\//g;
				let tipos = {t: "h3", c: "h6", n: "section", d: "article"}
				let lista = x.match(busca);
				let main  = wd.$("main").item(0);
				let nodes = [];
				for (let i = 0; i < lista.length; i++) {//>
					let node = {};
					let temp = lista[i];
					/* limpar caracteres de comentário */
					temp = temp.replace(/^\/\*/, "").replace(/\*\/$/, "");
					/* obter o nível e o HTML */
					node.css  = "nivel"+temp[0];
					if ((/^[0-9]\:\ /).test(temp)) node.html = tipos.d; else
					if ((/^[0-9]\ /).test(temp))   node.html = tipos.n; else
					if ((/^[A-z]\ /).test(temp))   node.html = tipos[temp[0]];
					/* limpar tipo da informação */
					temp = temp.replace(/^[0-9A-z]\:?\ /, "");
					/* atribuir formatações */
					temp = temp.replace(/\\b([A-Za-z0-9_áéíóúÁÉÍÓÚàÀêÊõÕãÃ\çÇ-]+)/gi, "<b>$1</b>");
					temp = temp.replace(/\\i([A-Za-z0-9_áéíóúÁÉÍÓÚàÀêÊõÕãÃ\çÇ-]+)/gi, "<i>$1</i>");
					temp = temp.replace(/\\u([A-Za-z0-9_áéíóúÁÉÍÓÚàÀêÊõÕãÃ\çÇ-]+)/gi, "<u>$1</u>");
					temp = temp.replace(/\\c([A-Za-z0-9_áéíóúÁÉÍÓÚàÀêÊõÕãÃ\çÇ-]+)/gi, "<code>$1</code>");
					/* registrar informações */
					node.texto = temp;
					nodes.push(node);
				}
				/* montando html */
				for (let i = 0; i < nodes.length; i++) {//>
					let node = nodes[i];
					let html = document.createElement(node.html);
					html.innerHTML = node.texto;
					html.className = node.css;
					if (["section"].indexOf(node.html) >= 0)
						html.id = node.texto.split(" ").reverse()[0];
			 	else if (["h3", "h6"].indexOf(node.html) >= 0)
						html.id = node.texto.toLowerCase().replace(/\ +/g, "_");
					main.appendChild(html);
				}
			}

			function lerJS() {
				wd().send(JS, function (x) {
					if (x.closed)
						manual(x.text);
					return;
				});
			}




			wd(window).addHandler({
				load: function() {
					lerJS();



				}
			});
		</script>
	</head>

	<body class="wd-padd">

		<main></main>

	</body>

</html>
