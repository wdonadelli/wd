<!DOCTYPE html>
<html class="wd">

	<head>
		<title>Bibliotecas Web WD: Manual do Arquivo JavaScript</title>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<meta name="keywords" content="wd, stylesheet, attributes, tools, HTML, CSS, javaScript, library, queryselector, handbook, github, donadelli, wdonadelli" />
		<meta name="author" content="Willian Donadelli"/>
		<meta name="description" content="WD Web Libraries: JS File Guide" />
		<meta name="rating" content="general" />
		<meta name="revisit-after" content="2 days" />
		<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
		<link  href="../wd5.css" rel="stylesheet" />
		<script src="../wd5.js"></script>
		<style>
			main {text-align: justify;}
			pre {color: teal; border-radius: .3em; border: 1px solid; background-color: lightgrey; padding: 0.5em}
			pre > b, code > b {color: royalblue;}
			p {text-indent: 2em;}
			dl {margin-left: 2em !important;}
			dt {font-family: "Courier New"; color: darkred;}
			var {color: DeepPink;}
		</style>

		<script>
const JS  = "../wd5.js";
const CSS = "../wd5.css";
const tag = {
/*:bloco de conte√∫do:*/
	H: "h3", h: "h4", p: "p", l: "dl", t: "dt", d: "dd", f: "pre",
	c: "code", i: "i", b: "b", s: "s", u: "u", v: "var"
};


function manual(x) {
	if (x === null || x === undefined)
		return alert("Erro ao ler o arquivo!");
	let busca  = /\/\*\*.+?\*\//g;
	let blocos = x.match(busca);
	//let html   = blocos.join(" ").replace(/\/\*\*/g, "").replace(/\*\*\//g, "");
	//for (let i in tag) {
		//let re  = new RegExp(i+"{(.+?)}"+i, "g");
		//html = html.replace(re, "<"+tag[i]+">$1</"+tag[i]+">");
		//html = html.replace(re, "<"+tag[i]+">$1</"+tag[i]+">");
	//}
	let html = [];
	for (let i = 0; i < blocos.length; i++) {
		for (let j in tag) {
			let re1  = new RegExp(j+"{", "g");
			let re2  = new RegExp("}"+j, "g");
			let re3  = /\/\*\*/g;
			let re4  = /\*\//g;
   blocos[i] = blocos[i].replace(re1, "<"+tag[j]+">");
			blocos[i] = blocos[i].replace(re2, "</"+tag[j]+">");
			blocos[i] = blocos[i].replace(re3, "");
			blocos[i] = blocos[i].replace(re4, "");
		}
	}
	//console.log(blocos.join(""));
	document.querySelector("main").innerHTML = blocos.join("")
}

function lerJS() {
	wd().send(JS, function (x) {
		if (x.closed)
			manual(x.text);
		return;
	});
}

wd(window).addHandler({
	load: function() {
		lerJS();



	}
});
		</script>
	</head>

	<body class="wd-padd">

		<main></main>

	</body>

</html>
