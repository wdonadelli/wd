<h3>Code Change</h3>

<script>
const SourceCSS = "../wd4.css";
const SourceJS  = "../wd4.js";
const wikiCSS   = "WD-CSS-Style-Properties";

function getCssProperties(input) {
	input = input.replace(".wd-", "wd-");
	let name  = input.replace(/^wd\-(x+)?/, "").replace(/(\-[a-z0-9]+)+/, "");
	let child = (/\-child$/).test(input) ? true : false;

	if (child) input = input.replace(/\-child$/, "");

	return {
		name: name,
		child: child ? "Yes" : "No",
		css: input
	};
}

function cssNameDescription(input) {
	/* |name|description| */
		return "|[wd-" + input + "](" + wikiCSS + "#" + input + ")||\n";
}

function cssParameterDescription(name, input) {
	/*|CSS|Child|Obs|*/
	let value = []
	value.push("## " + name + "\n");
	value.push("|Attribute|Child|Obs|");
	value.push("|:-------:|:---:|:-:|");

	for (let i in input)
		value.push("|" + i + "|" + input[i] + "||")
	value.push("\n");
	return value.join("\n");
}

function cssAttributes(type) {

	wd().send(SourceCSS, function(x) {

		if (x.closed) {

			let re   = /\.wd(\-[a-z0-9]+)+/g;
			let data = {};
			let txt  = [];
			let css  = wd(x.text.match(re)).tidy;

			for (let i = 0; i < css.length; i++) {
				let prop = getCssProperties(css[i]);
				if (!(prop.name in data)) data[prop.name] = {};
				data[prop.name][prop.css] = prop.child;
			}

			for (let i in data) {
				switch(type) {
					case "name": txt.push(cssNameDescription(i)); break;
					case "prop": txt.push(cssParameterDescription(i, data[i])); break;
				}
			}

			document.getElementById("code_change").textContent = txt.join("");console.log(data)
		}
	});
}
</script>


<nav>
	<span onclick="cssAttributes('name');">CSS Name</span>
	<span onclick="cssAttributes('prop');">CSS Prop</span>
</nav>


<pre id="code_change"></pre>
